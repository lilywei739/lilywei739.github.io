<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="robots" content="index,follow"/>
        <meta name="renderer" content="webkit" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui" />
        <meta name="keywords" content="React（一）">
        <meta name="screen-orientation" content="portrait" />
        <meta name="full-screen" content="yes" />
        <meta name="browsermode" content="application" />
        <meta name="x5-orientation" content="portrait" />
        <meta name="x5-fullscreen" content="true" />
        <meta name="x5-page-mode" content="app" />
        <title>React（一）</title>
        <link rel="shortcut icon" type="image/ico" href="/favicon.ico"/>
        <link rel="stylesheet" href="/css/common/github-gist.min.css">
        <link rel="stylesheet" href="/css/style.css">
        <!--[if lt IE 9]>
        <script src="/js/common/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <!-- HEADER -->
        <div id="header_wrap" class="outer">
            <header class="inner">
                <h1 id="project_title"><a href="/index.html">Weili - GitHub.io</a></h1>
                <h2 id="project_tagline"><a href="https://github.com/lilywei739/lilywei739.github.io" target="_blank">View on GitHub</a></h2>
            </header>
        </div>
            
        <div id="content-wrapper">
            <div class="main clearfix">
                <aside id="sidebar">
                    <ul class="side-nav">
                    </ul>
                </aside>

                <section id="main-cont">
                    <h1 id="react">React（一）</h1>

<p>React是Facebook开源的一个用于构建用户界面的Javascript库，已经 应用于Facebook及旗下Instagram。</p>

<p>和庞大的AngularJS不同，React专注于MVC架构中的V，即视图。 这使得React很容易和开发者已有的开发栈进行融合。</p>

<p>React顺应了Web开发组件化的趋势。应用React时，你总是应该从UI出发抽象出不同的组件，然后像搭积木一样把它们拼装起来：</p>

<p><img src="https://lilywei739.github.io/img/20170222/20170222-1.jpg" alt="网页请求过程" /></p>

<p>不过，React定义组件的方式和AngularJS截然不同。如果说HTML是一个轮子，AngularJS 的指令/Directive则是给这个轮子镶了个金边，而React，重新造了个轮子： JSX。</p>

<p>React抛弃HTML另起炉灶的原因之一是性能的考虑：DOM操作非常之慢。React引入了 虚拟DOM的概念：开发者操作虚拟DOM，React在必要的时候将它们渲染到真正的 DOM上 —— 有点像游戏开发中的双缓冲区/Double Buffer帧重绘。</p>

<p>引入虚拟DOM的另一个好处是，容易引入不同的渲染引擎。比如将你的应用代码渲染 到真实的DOM，或者nodejs服务端的无头DOM，或者，iOS/Android平台组件 —— 这就是 React Native ：</p>

<p><img src="https://lilywei739.github.io/img/20170222/20170222-2.jpg" alt="网页请求过程" /></p>

<h3 id="section">使用</h3>

<p>在引入React库之后，开发API就通过React对象暴露出来了。我们要做的、能做的，就是：</p>

<p><strong>在虚拟DOM上创建元素，然后将它们渲染到真实DOM上</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>Hello React!<span class="nt">&lt;/title&gt;</span>
	<span class="c">&lt;!--1.引入React库--&gt;</span>
	<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"build/react.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
	<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"build/react-dom.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
	<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"build/babel.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
	<span class="nt">&lt;style&gt;</span>
		<span class="nt">p</span><span class="p">{</span><span class="nl">font</span><span class="p">:</span><span class="nb">italic</span> <span class="nb">bold</span> <span class="m">50px</span> <span class="n">verdana</span><span class="p">;}</span>
	<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="c">&lt;!--2.在真实DOM上定义容器--&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;&lt;/div&gt;</span>
	<span class="nt">&lt;script&gt;</span>
	
		<span class="c1">//3.在虚拟DOM上创建p元素</span>
		<span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">"p"</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">"Hello React!"</span><span class="p">);</span>
	
		<span class="c1">//4.将虚拟DOM上的p元素渲染到真实DOM上的#content容器</span>
		<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#content"</span><span class="p">));</span>
	<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<p>上面代码一共用了三个库： react.js 、react-dom.js 和 Browser.js ，它们必须首先加载。</p>

<ul>
  <li>react.js 是 React 的核心库，</li>
  <li>react-dom.js 是提供与 DOM 相关的功能，</li>
  <li>babel.min.js Babel 可以将 ES6 代码转为 ES5 代码，这样我们就能在目前不支持 ES6 浏览器上执行 React 代码。Babel 内嵌了对 JSX 的支持。通过将 Babel 和 babel-sublime 包（package）一同使用可以让源码的语法渲染上升到一个全新的水平。</li>
</ul>

<h4 id="createelement">createElement</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>createElement(type,[props],[children...]) - 在虚拟DOM上创建指定的React元素

type: 用来指定要创建的元素类型，可以是一个字符串或一个React组件类型。当使用 字符串时，这个参数应当是标准的HTML标签名称，比如：p、div、canvas等等。
props: 是可选的JSON对象，用来指定元素的附加属性，比如样式、CSS类等等。 我们在示例中简单的设置为null。
从第三个参数children开始的所有参数，都被认为是这个元素的子元素。
</code></pre>
</div>

<h4 id="render">render</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>render(element,container,[callback]) - 将虚拟DOM上的对象渲染到真实DOM上

element: 使用createElement()方法创建的React元素，注意，不是HTML元素！
container: 是真实DOM中的HTML元素，作为渲染的目标容器，它的内容将被render()方法 的执行改变。
callback: 参数是可选的函数，当渲染完成或更新后被执行，通常不用它。



var el = React.createElement(
    "ul",
    null,
    React.createElement("li",null,"China"),
    React.createElement("li",null,"Japan"),
    React.createElement("li",null,"Korea")
);

render(el, document.querySelector('box')) - 将虚拟DOM上的对象渲染到真实DOM上
</code></pre>
</div>

<h4 id="dom">虚拟DOM</h4>

<p>在React中，应用程序在虚拟DOM上操作，这让React有了优化的机会。简单说， React在每次需要渲染时，会先比较当前DOM内容和待渲染内容的差异， 然后再决定如何最优地更新DOM。这个过程被称为reconciliation。</p>

<p>除了性能的考虑，React引入虚拟DOM更重要的意义是提供了一种一致的开发方 式来开发服务端应用、Web应用和手机端应用：</p>

<p><img src="https://lilywei739.github.io/img/20170222/20170222-3.png" alt="网页请求过程" /></p>

<p>因为有了虚拟DOM这一层，所以通过配备不同的渲染器，就可以将虚拟DOM的内容 渲染到不同的平台。而应用开发者，使用JavaScript就可以通吃各个平台了。</p>

<h4 id="react-1">React组件</h4>

<p>在React中定义一个组件也是相当的容易，组件就是一个 实现预定义接口的JavaScript类：<strong>React.createClass(meta)</strong></p>

<p>在meta中，至少需要实现一个render()方法，而这个方法， 必须而且只能返回一个有效的React元素。</p>

<p>这意味着，如果你的组件是由多个元素构成的，那么你必须在外边包一个顶层 元素，然后返回这个顶层元素。比如创建一个布局组件：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//定义React组件
	var EzLedComp = React.createClass({
		//每个React组件都应该事先render()方法
		render : function(){
			var e = React.createElement(
				"div",
				{className : "ez-led"},
				"Hello, React!"
			);
			//render()方法应该返回一个React元素
			return e;
		}
	});
	//创建React元素
	var el = React.createElement(EzLedComp);
	//渲染
	ReactDOM.render(el,document.querySelector("#content"));

</code></pre>
</div>

<ul>
  <li>React组件名称的首字母应当大写</li>
  <li>注意到div元素的样式类是用 className而不是class声明的，这是因为class 是JavaScript的保留字，渲染后，真实的DOM还会是：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;div class="ez-led"&gt;Hello, React!&lt;/div&gt;
</code></pre>
</div>

<ul>
  <li>组件定义以后，和标准HTML标签一样，可以使用createElement()方法 创建元素，只是这时，第一个参数是我们定义的组件类，而不是标签名字符串：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>React.createElement(EzLedComp);
</code></pre>
</div>

<p>React引入虚拟DOM以后，创建DOM树得在JavaScript里写代码，这使得界面定义 变得相当繁琐。比如我们创建两排的液晶组件得这么写：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>render: function(){
    return React.createElement(
        "div",null,
        React.createElement("div",{className:"ez-led"},"Hello, React!"),
        React.createElement("div",{className:"ez-led"},"2015-04-15")
    );
}
</code></pre>
</div>

<p>而它们被渲染后对应的声明式HTML则简单明了：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;div&gt;
    &lt;div class="ez-led"&gt;Hello, React!&lt;/div&gt;
    &lt;div class="ez-led"&gt;2015-04-15&lt;/div&gt;
&lt;/div&gt;
</code></pre>
</div>

<p>于是，JSX来了!!!!</p>

<h4 id="react-jsx">React JSX</h4>

<p>React 使用 JSX 来替代常规的 JavaScript。</p>

<p>JSX 是一个看起来很像 XML 的 JavaScript 语法扩展。</p>

<p>我们不需要一定使用 JSX，但它有以下优点：</p>

<ul>
  <li>JSX 执行更快，因为它在编译为 JavaScript 代码后进行了优化。</li>
  <li>它是类型安全的，在编译过程中就能发现错误。</li>
  <li>使用 JSX 编写模板更加简单快速。</li>
</ul>

<h4 id="jsx">使用 JSX</h4>

<p>JSX 看起来类似 HTML ，如下面的例子，可以在以上代码中嵌套多个 HTML 标签，需要使用一个 div 元素包裹它，实例中的 p 元素添加了自定义属性 data-myattribute，添加自定义属性需要使用 data- 前缀。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ReactDOM.render(
    &lt;div&gt;
	    &lt;h1&gt;菜鸟教程&lt;/h1&gt;
	    &lt;h2&gt;欢迎学习 React&lt;/h2&gt;
	    &lt;p data-myattribute = "somevalue"&gt;这是一个很不错的 JavaScript 库!&lt;/p&gt;
    &lt;/div&gt;
    document.getElementById('example')
);
</code></pre>
</div>

<h5 id="jsx-1">JSX做为独立文件引用</h5>

<p>例如创建一个 helloworld_react.js 文件，代码如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ReactDOM.render(
  &lt;h1&gt;Hello, world!&lt;/h1&gt;,
  document.getElementById('example')
);
</code></pre>
</div>

<p>然后在 HTML 文件中引入该 JS 文件：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;body&gt;
  &lt;div id="example"&gt;&lt;/div&gt;
  &lt;script type="text/babel" src="helloworld_react.js"&gt;&lt;/script&gt;
&lt;/body&gt;
</code></pre>
</div>

<p>注意引入的 JS 文件的 type 值为“text/babel”</p>

<h5 id="jsx----javascript-">JSX – JavaScript 表达式</h5>

<p>可以在 JSX 中使用 JavaScript 表达式。表达式写在花括号 {} 中。实例如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ReactDOM.render(
    &lt;div&gt;
      &lt;h1&gt;{1+1}&lt;/h1&gt;
    &lt;/div&gt;
    ,
    document.getElementById('example')
);
</code></pre>
</div>

<p><strong>在 JSX 中不能使用 if else 语句，但可以使用 conditional (三元运算) 表达式来替代。</strong>以下实例中如果变量 i 等于 1 浏览器将输出 true, 如果修改 i 的值，则会输出 false。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ReactDOM.render(
    &lt;div&gt;
      &lt;h1&gt;{i == 1 ? 'True!' : 'False'}&lt;/h1&gt;
    &lt;/div&gt;
    ,
    document.getElementById('example')
);
</code></pre>
</div>

<h5 id="jsx----">JSX – 内联样式</h5>

<p>React 推荐使用内联样式，需要注意下面2个点：</p>

<ul>
  <li>需要使用驼峰式命名语法来设置内联样式.比如：border-radius样式需要使用borderRadius来访问，而background-image 样式需要使用backgroundImage来访问。</li>
  <li>样式名称中的供应商前缀，除ms外都需要大写首字母,对于供应商前缀（-webkit, -moz, -o, -ms），除了ms，其他都需要将首字母大写。 比如：-webkit-transition应当通过WebkitTransition来访问，然而-ms-transition 则需要通过msTransition来访问。</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>var style = {
      	width: "200px",
      	height: "200px",
      	background: "red",
      	borderRadius: "10rem"
      };

      ReactDOM.render(
        &lt;div style={style}&gt;&lt;/div&gt;,
        document.getElementById('example')
      );
</code></pre>
</div>

<h5 id="jsx-----1">JSX – 注释</h5>

<p>注释需要写在花括号中，实例如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ReactDOM.render(
    &lt;div&gt;
    &lt;h1&gt;菜鸟教程&lt;/h1&gt;
    {/*注释...*/}
     &lt;/div&gt;,
    document.getElementById('example')
);
</code></pre>
</div>

<h5 id="jsx-----2">JSX – 数组</h5>

<div class="highlighter-rouge"><pre class="highlight"><code>    &lt;script type="text/babel"&gt;
      var arr = [
      	&lt;h2&gt;这是标题&lt;/h2&gt;,
      	&lt;p&gt;这是内容&lt;/p&gt;
      ];

      ReactDOM.render(
        &lt;div&gt;{arr}&lt;/div&gt;,
        document.getElementById('example')
      );
    &lt;/script&gt;
</code></pre>
</div>

<h5 id="jsx----html--vs-react-">JSX – HTML 标签 VS React 组件</h5>

<p>React 可以渲染 HTML 标签 (strings) 或 React 组件 (classes)。</p>

<ul>
  <li>要渲染 HTML 标签，只需在 JSX 里使用小写字母的标签名。</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>var myDivElement = &lt;div className="foo" /&gt;;
ReactDOM.render(myDivElement, document.getElementById('example'));
</code></pre>
</div>

<ul>
  <li>渲染 React 组件，需创建一个大写字母开头的本地变量。</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>var MyComponent = React.createClass({....})
var myElement = &lt;MyComponent /&gt;
ReactDOM.render(myElement, document.getElementById('box'));
</code></pre>
</div>

<p>React 的 JSX 使用大、小写的约定来区分本地组件的类和 HTML 标签。</p>

<blockquote>
  <p>由于 JSX 就是 JavaScript，一些标识符像 class 和 for 不建议作为 XML 属性名。作为替代，React DOM 使用 className 和 htmlFor 来做对应的属性。</p>
</blockquote>

		<div class="PageNavigation">
		  
		    <a class="prev" href="/2017/02/14/angularjs_1.html">&laquo; Angularjs初级</a>
		  
		  
		    <a class="next" href="/2017/03/02/React_2.html">React（二） &raquo;</a>
		  
		</div>
		<!-- 多说评论框 start -->
<div id="ds_ele" class="ds-thread" data-thread-key="" data-title="React（一）" data-url="http://lilywei739.github.io/react/js/2017/02/22/React_1.html"></div>
                    <!-- 多说评论框 end -->
                    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
		    <script type="text/javascript">
                        var url = window.location.pathname;
                        url = url.substr(1, url.length -6).replace(/\//gi, '_');
                        document.getElementById('ds_ele').dataset.threadKey = url;
                        var duoshuoQuery = {short_name:"github"};
                        (function() {
                            var ds = document.createElement('script');
                            ds.type = 'text/javascript';ds.async = true;
                            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                            ds.charset = 'UTF-8';
                            (document.getElementsByTagName('head')[0] 
                            || document.getElementsByTagName('body')[0]).appendChild(ds);
                        })();
                    </script>
		<!-- 多说公共JS代码 end -->
                </section>
            </div>
        </div>
            
        <!-- FOOTER  -->
        <div id="footer_wrap" class="outer">
            <footer class="inner">
                <p>© 2016  by Weili &nbsp;&nbsp;  |  &nbsp;&nbsp;托管在 - <a href="https://pages.github.com">GitHub</a></p>
            </footer>
        </div>
        <script src="/js/common/jquery-2.2.4.min.js"></script>
        <script src="/js/common/highlight.min.js"></script>
        <script src="/js/aside-nav.js"></script>
        <script>
            // baidu 统计
            var _hmt = _hmt || [];
            (function() {
                var hm = document.createElement("script");
                hm.src = "//hm.baidu.com/hm.js?146fe495fee020bf0e4dd701aa73965f";
                var s = document.getElementsByTagName("script")[0]; 
                s.parentNode.insertBefore(hm, s);
            })();
            // highlight
            hljs.initHighlightingOnLoad({useBR: true});
            $(document).ready(function() {
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });

                // http2
                var img = new Image();
                img.src = 'https://www.h2statistics.ml/';
            });
        </script>
    </body>
</html>
